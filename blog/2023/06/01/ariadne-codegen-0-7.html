<!doctype html><html lang=en dir=ltr class="blog-wrapper blog-post-page plugin-blog plugin-id-default" data-has-hydrated=false><meta charset=UTF-8><meta name=generator content="Docusaurus v3.8.1"><title data-rh=true>Ariadne Codegen 0.7 | Ariadne · Python GraphQL Schema-first</title><meta data-rh=true name=viewport content="width=device-width, initial-scale=1.0"><meta data-rh=true name=twitter:card content=summary_large_image><meta data-rh=true property=og:image content=https://ariadnegraphql.org/img/docusaurus-social-card.jpg><meta data-rh=true name=twitter:image content=https://ariadnegraphql.org/img/docusaurus-social-card.jpg><meta data-rh=true property=og:url content=https://ariadnegraphql.org/blog/2023/06/01/ariadne-codegen-0-7><meta data-rh=true property=og:locale content=en><meta data-rh=true name=docusaurus_locale content=en><meta data-rh=true name=docusaurus_tag content=default><meta data-rh=true name=docsearch:language content=en><meta data-rh=true name=docsearch:docusaurus_tag content=default><meta data-rh=true property=og:title content="Ariadne Codegen 0.7 | Ariadne · Python GraphQL Schema-first"><meta data-rh=true name=description content="Ariadne Codegen 0.7 is now available!"><meta data-rh=true property=og:description content="Ariadne Codegen 0.7 is now available!"><meta data-rh=true property=og:type content=article><meta data-rh=true property=article:published_time content=2023-06-01T00:00:00.000Z><link data-rh=true rel=icon href=/img/favicon.ico><link data-rh=true rel=canonical href=https://ariadnegraphql.org/blog/2023/06/01/ariadne-codegen-0-7><link data-rh=true rel=alternate href=https://ariadnegraphql.org/blog/2023/06/01/ariadne-codegen-0-7 hreflang=en><link data-rh=true rel=alternate href=https://ariadnegraphql.org/blog/2023/06/01/ariadne-codegen-0-7 hreflang=x-default><link data-rh=true rel=preconnect href=https://BYJBYPP90Q-dsn.algolia.net crossorigin=anonymous><script data-rh=true type=application/ld+json>{"@context":"https://schema.org","@id":"https://ariadnegraphql.org/blog/2023/06/01/ariadne-codegen-0-7","@type":"BlogPosting","author":[],"datePublished":"2023-06-01T00:00:00.000Z","description":"Ariadne Codegen 0.7 is now available!","headline":"Ariadne Codegen 0.7","isPartOf":{"@id":"https://ariadnegraphql.org/blog","@type":"Blog","name":"Blog"},"keywords":[],"mainEntityOfPage":"https://ariadnegraphql.org/blog/2023/06/01/ariadne-codegen-0-7","name":"Ariadne Codegen 0.7","url":"https://ariadnegraphql.org/blog/2023/06/01/ariadne-codegen-0-7"}</script><link rel=alternate type=application/rss+xml href=/blog/rss.xml title="Ariadne · Python GraphQL Schema-first RSS Feed"><link rel=alternate type=application/atom+xml href=/blog/atom.xml title="Ariadne · Python GraphQL Schema-first Atom Feed"><link rel=search type=application/opensearchdescription+xml title="Ariadne · Python GraphQL Schema-first" href=/opensearch.xml><link rel=stylesheet href=/assets/css/styles.8871cce7.css><script src=/assets/js/runtime~main.c56cfe4b.js defer></script><script src=/assets/js/main.4899d341.js defer></script><body class=navigation-with-keyboard><svg xmlns=http://www.w3.org/2000/svg style="display: none;"><defs>
<symbol id=theme-svg-external-link viewBox="0 0 24 24"><path fill=currentColor d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t="light",e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",e||t),document.documentElement.setAttribute("data-theme-choice",e||t)}(),function(){try{for(var[t,e]of new URLSearchParams(window.location.search).entries())if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id=__docusaurus><link rel=preload as=image href=/img/logo-horizontal-sm.png><div role=region aria-label="Skip to main content"><a class=skipToContent_fXgn href=#__docusaurus_skipToContent_fallback>Skip to main content</a></div><nav aria-label=Main class="theme-layout-navbar navbar navbar--fixed-top"><div class=navbar__inner><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded=false class="navbar__toggle clean-btn" type=button><svg width=30 height=30 viewBox="0 0 30 30" aria-hidden=true><path stroke=currentColor stroke-linecap=round stroke-miterlimit=10 stroke-width=2 d="M4 7h22M4 15h22M4 23h22"/></svg></button><a class=navbar__brand href=/><div class=navbar__logo><img src=/img/logo-horizontal-sm.png alt="Ariadne Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src=/img/logo-horizontal-sm.png alt="Ariadne Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div></a><a class="navbar__item navbar__link" href=/server/intro>Server Docs</a><div class="navbar__item dropdown dropdown--hoverable"><a class=navbar__link aria-haspopup=true aria-expanded=false role=button href=/server/intro>0.25</a><ul class=dropdown__menu><li><a class=dropdown__link href=/server/next/intro>Next</a><li><a class=dropdown__link href=/server/intro>0.25</a><li><a class=dropdown__link href=/server/0.24/intro>0.24</a><li><a class=dropdown__link href=/server/0.23/intro>0.23</a><li><a class=dropdown__link href=/server/0.22/intro>0.22</a><li><a class=dropdown__link href=/server/0.21/intro>0.21</a><li><a class=dropdown__link href=/server/0.20/intro>0.20</a><li><a class=dropdown__link href=/server/0.19/intro>0.19</a><li><a class=dropdown__link href=/server/0.18/intro>0.18</a><li><a class=dropdown__link href=/server/0.17/intro>0.17</a><li><a class=dropdown__link href=/server/0.16/intro>0.16</a><li><a class=dropdown__link href=/server/0.15/intro>0.15</a><li><a class=dropdown__link href=/server/0.14.0/intro>0.14.0</a><li><a class=dropdown__link href=/server/0.13.0/intro>0.13.0</a><li><a class=dropdown__link href=/server/0.12.0/intro>0.12.0</a><li><a class=dropdown__link href=/server/0.11.0/intro>0.11.0</a><li><a class=dropdown__link href=/server/0.10.0/intro>0.10.0</a><li><a class=dropdown__link href=/server/0.9.0/intro>0.9.0</a><li><a class=dropdown__link href=/server/0.8.0/intro>0.8.0</a><li><a class=dropdown__link href=/server/0.7.0/intro>0.7.0</a><li><a class=dropdown__link href=/server/0.6.0/intro>0.6.0</a><li><a class=dropdown__link href=/server/0.5.0/intro>0.5.0</a><li><a class=dropdown__link href=/server/0.4.0/intro>0.4.0</a></ul></div></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a aria-current=page class="navbar__item navbar__link navbar__link--active" href=/blog>Blog</a><a class="navbar__item navbar__link" href=/community>Community</a><a href="https://github.com/mirumee/Ariadne?tab=readme-ov-file#ariadne-ecosystem" target=_blank rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width=13.5 height=13.5 aria-hidden=true class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a><div class=navbarSearchContainer_Bca1><button type=button class="DocSearch DocSearch-Button" aria-label="Search (Command+K)"><span class=DocSearch-Button-Container><svg width=20 height=20 class=DocSearch-Search-Icon viewBox="0 0 20 20" aria-hidden=true><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke=currentColor fill=none fill-rule=evenodd stroke-linecap=round stroke-linejoin=round /></svg><span class=DocSearch-Button-Placeholder>Search</span></span><span class=DocSearch-Button-Keys></span></button></div></div></div><div role=presentation class=navbar-sidebar__backdrop></div></nav><div id=__docusaurus_skipToContent_fallback class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class=row><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_pO2u margin-bottom--md">Recent posts</div><div role=group><h3 class=yearGroupHeading_rMGB>2024</h3><ul class="sidebarItemList_Yudw clean-list"><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/blog/2024/12/19/ariadne-0-24>Ariadne 0.24</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/blog/2024/03/26/ariadne-graphql-proxy-0-3>Ariadne GraphQL Proxy 0.3</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/blog/2024/03/18/ariadne-0-23>Ariadne 0.23</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/blog/2024/03/04/ariadne-codegen-0-13>Ariadne Codegen 0.13</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/blog/2024/02/21/ariadne-graphql-modules-0-8>Ariadne GraphQL Modules 0.8</a></ul></div></nav></aside><main class="col col--7"><article class=""><header><h1 class=title_f1Hy>Ariadne Codegen 0.7</h1><div class="container_mt6G margin-vert--md"><time datetime=2023-06-01T00:00:00.000Z>June 1, 2023</time> · <!-- -->6 min read</div></header><div id=__blog-post-container class=markdown><p>Ariadne Codegen 0.7 is now available!</p>
<p>This release brings support for subscriptions, changes how fragments are represented in generated code, introduces the <code>ShorterResultsPlugin</code> plugin developed by our amazing community, and more features and fixes.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=subscriptions>Subscriptions<a href=#subscriptions class=hash-link aria-label="Direct link to Subscriptions" title="Direct link to Subscriptions">​</a></h2>
<p>Version <code>0.7</code> introduces support for subscriptions. We generate them as async generators, which means that we don't support subscriptions when the generated client is not async (<code>async_client</code> is set to <code>false</code>).</p>
<p>For example, given the following operation:</p>
<div class="language-gql codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-gql codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">subscription GetUsersCounter {</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  usersCounter</span><br></span><span class=token-line style=color:#393A34><span class="token plain">}</span><br></span></code></pre></div></div>
<p>Generated client will have following method:</p>
<div class="language-py codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-py codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token keyword" style=color:#00009f>async</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>def</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>get_users_counter</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">self</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>-</span><span class="token operator" style=color:#393A34>></span><span class="token plain"> AsyncIterator</span><span class="token punctuation" style=color:#393A34>[</span><span class="token plain">GetUsersCounter</span><span class="token punctuation" style=color:#393A34>]</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        query </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> gql</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">            </span><span class="token triple-quoted-string string" style=color:#e3116c>"""</span><br></span><span class=token-line style=color:#393A34><span class="token triple-quoted-string string" style=color:#e3116c>            subscription GetUsersCounter {</span><br></span><span class=token-line style=color:#393A34><span class="token triple-quoted-string string" style=color:#e3116c>              usersCounter</span><br></span><span class=token-line style=color:#393A34><span class="token triple-quoted-string string" style=color:#e3116c>            }</span><br></span><span class=token-line style=color:#393A34><span class="token triple-quoted-string string" style=color:#e3116c>            """</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        </span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        variables</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> </span><span class="token builtin">dict</span><span class="token punctuation" style=color:#393A34>[</span><span class="token builtin">str</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token builtin">object</span><span class="token punctuation" style=color:#393A34>]</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        </span><span class="token keyword" style=color:#00009f>async</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>for</span><span class="token plain"> data </span><span class="token keyword" style=color:#00009f>in</span><span class="token plain"> self</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">execute_ws</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">query</span><span class="token operator" style=color:#393A34>=</span><span class="token plain">query</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> variables</span><span class="token operator" style=color:#393A34>=</span><span class="token plain">variables</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">            </span><span class="token keyword" style=color:#00009f>yield</span><span class="token plain"> GetUsersCounter</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">parse_obj</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">data</span><span class="token punctuation" style=color:#393A34>)</span><br></span></code></pre></div></div>
<p>Our default async base client uses <a href=https://github.com/python-websockets/websockets target=_blank rel="noopener noreferrer">websockets</a> package and implements <a href=https://github.com/enisdenjo/graphql-ws/blob/master/PROTOCOL.md target=_blank rel="noopener noreferrer">graphql-transport-ws</a> subprotocol.</p>
<p>Required dependencies can be installed with pip:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-text codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">$ pip install ariadne-codegen[subscriptions]</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=fragments>Fragments<a href=#fragments class=hash-link aria-label="Direct link to Fragments" title="Direct link to Fragments">​</a></h2>
<p>In previous versions of Codegen fragments were "unpacked" in queries. For example, given the following operations:</p>
<div class="language-gql codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-gql codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">query GetA {</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  getTypeA {</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    ...FragmentA</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  }</span><br></span><span class=token-line style=color:#393A34><span class="token plain">}</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">query ListA {</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  listTypeA {</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    ...FragmentA</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  }</span><br></span><span class=token-line style=color:#393A34><span class="token plain">}</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">fragment FragmentA on TypeA {</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  id</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  name</span><br></span><span class=token-line style=color:#393A34><span class="token plain">}</span><br></span></code></pre></div></div>
<p>Generated <code>get_a.py</code> and <code>list_a.py</code> files had types looking like this:</p>
<div class="language-py codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-py codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token comment" style=color:#999988;font-style:italic># get_a.py</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token keyword" style=color:#00009f>class</span><span class="token plain"> </span><span class="token class-name">GetA</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">BaseModel</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    get_type_a</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>"GetAGetTypeA"</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> Field</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">alias</span><span class="token operator" style=color:#393A34>=</span><span class="token string" style=color:#e3116c>"GetTypeA"</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token keyword" style=color:#00009f>class</span><span class="token plain"> </span><span class="token class-name">GetAGetTypeA</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">BaseModel</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token builtin">id</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    name</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> </span><span class="token builtin">str</span><br></span></code></pre></div></div>
<div class="language-py codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-py codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token comment" style=color:#999988;font-style:italic># list_a.py</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token keyword" style=color:#00009f>class</span><span class="token plain"> </span><span class="token class-name">ListA</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">BaseModel</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    list_type_a</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> List</span><span class="token punctuation" style=color:#393A34>[</span><span class="token string" style=color:#e3116c>"ListAListTypeA"</span><span class="token punctuation" style=color:#393A34>]</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> Field</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">alias</span><span class="token operator" style=color:#393A34>=</span><span class="token string" style=color:#e3116c>"ListTypeA"</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token keyword" style=color:#00009f>class</span><span class="token plain"> </span><span class="token class-name">ListAListTypeA</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">BaseModel</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token builtin">id</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    name</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> </span><span class="token builtin">str</span><br></span></code></pre></div></div>
<p>Both of these operations use the same <code>FragmentA</code> to represent <code>TypeA</code>, but generated models didn't reflect that.</p>
<p>To make working with fragments easier, in Ariadne Codegen 0.7 we are changing this behavior. Instead of unpacking fragments, we generate separate models from them and use those as mixins. The above operation will now result in 3 files being generated: <code>get_a.py</code>, <code>list_a.py</code>, and <code>fragments.py</code></p>
<div class="language-py codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-py codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token comment" style=color:#999988;font-style:italic># get_a.py</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token keyword" style=color:#00009f>class</span><span class="token plain"> </span><span class="token class-name">GetA</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">BaseModel</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    get_type_a</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>"GetAGetTypeA"</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> Field</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">alias</span><span class="token operator" style=color:#393A34>=</span><span class="token string" style=color:#e3116c>"GetTypeA"</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token keyword" style=color:#00009f>class</span><span class="token plain"> </span><span class="token class-name">GetAGetTypeA</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">FragmentA</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token keyword" style=color:#00009f>pass</span><br></span></code></pre></div></div>
<div class="language-py codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-py codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token comment" style=color:#999988;font-style:italic># list_a.py</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token keyword" style=color:#00009f>class</span><span class="token plain"> </span><span class="token class-name">ListA</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">BaseModel</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    list_type_a</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> List</span><span class="token punctuation" style=color:#393A34>[</span><span class="token string" style=color:#e3116c>"ListAListTypeA"</span><span class="token punctuation" style=color:#393A34>]</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> Field</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">alias</span><span class="token operator" style=color:#393A34>=</span><span class="token string" style=color:#e3116c>"ListTypeA"</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token keyword" style=color:#00009f>class</span><span class="token plain"> </span><span class="token class-name">ListAListTypeA</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">FragmentA</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token keyword" style=color:#00009f>pass</span><br></span></code></pre></div></div>
<div class="language-py codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-py codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token comment" style=color:#999988;font-style:italic># fragments.py</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token keyword" style=color:#00009f>class</span><span class="token plain"> </span><span class="token class-name">FragmentA</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">BaseModel</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token builtin">id</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    name</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> </span><span class="token builtin">str</span><br></span></code></pre></div></div>
<p>With this change you can use fragments as reusable types in your Python logic using the client, eg. <code>def process_a(a: FragmentA)...</code>. New <code>fragments.py</code> consists of fragments collected from all parsed operations.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=unions-and-interfaces>Unions and Interfaces<a href=#unions-and-interfaces class=hash-link aria-label="Direct link to Unions and Interfaces" title="Direct link to Unions and Interfaces">​</a></h3>
<p>There is an exception from new fragments behaviour. If a fragment represents <code>Union</code> then we unpack it as before:</p>
<div class="language-gql codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-gql codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">query getAnimal {</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  animal {</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    ...AnimalData</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  }</span><br></span><span class=token-line style=color:#393A34><span class="token plain">}</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">fragment AnimalData on AnimalInterface {</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  name</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  ... on Dog {</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    dogField</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  }</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  ... on Cat {</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    catField</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  }</span><br></span><span class=token-line style=color:#393A34><span class="token plain">}</span><br></span></code></pre></div></div>
<p>For the above fragment, this Python code will be generated:</p>
<div class="language-py codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-py codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token keyword" style=color:#00009f>class</span><span class="token plain"> </span><span class="token class-name">GetAnimal</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">BaseModel</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    animal</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> Union</span><span class="token punctuation" style=color:#393A34>[</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        </span><span class="token string" style=color:#e3116c>"GetAnimalAnimalAnimalInterface"</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>"GetAnimalAnimalDog"</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>"GetAnimalAnimalCat"</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token punctuation" style=color:#393A34>]</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> Field</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">discriminator</span><span class="token operator" style=color:#393A34>=</span><span class="token string" style=color:#e3116c>"typename__"</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token keyword" style=color:#00009f>class</span><span class="token plain"> </span><span class="token class-name">GetAnimalAnimalAnimalInterface</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">BaseModel</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    typename__</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> Literal</span><span class="token punctuation" style=color:#393A34>[</span><span class="token string" style=color:#e3116c>"AnimalInterface"</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>"Fish"</span><span class="token punctuation" style=color:#393A34>]</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> Field</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">alias</span><span class="token operator" style=color:#393A34>=</span><span class="token string" style=color:#e3116c>"__typename"</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    name</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token keyword" style=color:#00009f>class</span><span class="token plain"> </span><span class="token class-name">GetAnimalAnimalDog</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">BaseModel</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    typename__</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> Literal</span><span class="token punctuation" style=color:#393A34>[</span><span class="token string" style=color:#e3116c>"Dog"</span><span class="token punctuation" style=color:#393A34>]</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> Field</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">alias</span><span class="token operator" style=color:#393A34>=</span><span class="token string" style=color:#e3116c>"__typename"</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    name</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    dog_field</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> Field</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">alias</span><span class="token operator" style=color:#393A34>=</span><span class="token string" style=color:#e3116c>"dogField"</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token keyword" style=color:#00009f>class</span><span class="token plain"> </span><span class="token class-name">GetAnimalAnimalCat</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">BaseModel</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    typename__</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> Literal</span><span class="token punctuation" style=color:#393A34>[</span><span class="token string" style=color:#e3116c>"Cat"</span><span class="token punctuation" style=color:#393A34>]</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> Field</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">alias</span><span class="token operator" style=color:#393A34>=</span><span class="token string" style=color:#e3116c>"__typename"</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    name</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    cat_field</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> Field</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">alias</span><span class="token operator" style=color:#393A34>=</span><span class="token string" style=color:#e3116c>"catField"</span><span class="token punctuation" style=color:#393A34>)</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=shorterresultsplugin><code>ShorterResultsPlugin</code><a href=#shorterresultsplugin class=hash-link aria-label="Direct link to shorterresultsplugin" title="Direct link to shorterresultsplugin">​</a></h2>
<p>In version 0.7 we are including <code>ShorterResultsPlugin</code> developed by our community. It can be used when operations have only one top-level field. For example, given the following operation:</p>
<div class="language-gql codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-gql codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">query GetUser($userId: ID!) {</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  user(id: $userId) {</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    id</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  }</span><br></span><span class=token-line style=color:#393A34><span class="token plain">}</span><br></span></code></pre></div></div>
<p>From this operation, the generated method looks like this:</p>
<div class="language-py codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-py codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token keyword" style=color:#00009f>async</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>def</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>get_user</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">self</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> user_id</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>-</span><span class="token operator" style=color:#393A34>></span><span class="token plain"> GetUser</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    query </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> gql</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        </span><span class="token triple-quoted-string string" style=color:#e3116c>"""</span><br></span><span class=token-line style=color:#393A34><span class="token triple-quoted-string string" style=color:#e3116c>        query GetUser($userId: ID!) {</span><br></span><span class=token-line style=color:#393A34><span class="token triple-quoted-string string" style=color:#e3116c>            user(id: $userId) {</span><br></span><span class=token-line style=color:#393A34><span class="token triple-quoted-string string" style=color:#e3116c>                id</span><br></span><span class=token-line style=color:#393A34><span class="token triple-quoted-string string" style=color:#e3116c>            }</span><br></span><span class=token-line style=color:#393A34><span class="token triple-quoted-string string" style=color:#e3116c>        }</span><br></span><span class=token-line style=color:#393A34><span class="token triple-quoted-string string" style=color:#e3116c>        """</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    variables</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> </span><span class="token builtin">dict</span><span class="token punctuation" style=color:#393A34>[</span><span class="token builtin">str</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token builtin">object</span><span class="token punctuation" style=color:#393A34>]</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token string" style=color:#e3116c>"userId"</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> user_id</span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    response </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>await</span><span class="token plain"> self</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">execute</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">query</span><span class="token operator" style=color:#393A34>=</span><span class="token plain">query</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> variables</span><span class="token operator" style=color:#393A34>=</span><span class="token plain">variables</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    data </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> self</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">get_data</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">response</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token keyword" style=color:#00009f>return</span><span class="token plain"> GetUser</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">parse_obj</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">data</span><span class="token punctuation" style=color:#393A34>)</span><br></span></code></pre></div></div>
<p>To get the value of <code>user</code>, we need to always get it by attribute, eg. <code>await get_user("1").user</code>. By using <code>ShorterResultsPlugin</code> our <code>get_user</code> returns the value of <code>user</code> directly.</p>
<div class="language-toml codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-toml codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">[tool.ariadne-codegen]</span><br></span><span class=token-line style=color:#393A34><span class="token plain">...</span><br></span><span class=token-line style=color:#393A34><span class="token plain">plugins = ["ariadne_codegen.contrib.shorter_results.ShorterResultsPlugin"]</span><br></span></code></pre></div></div>
<div class="language-py codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-py codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token keyword" style=color:#00009f>async</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>def</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>get_user</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">self</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> user_id</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>-</span><span class="token operator" style=color:#393A34>></span><span class="token plain"> GetUserUser</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token punctuation" style=color:#393A34>.</span><span class="token punctuation" style=color:#393A34>.</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token keyword" style=color:#00009f>return</span><span class="token plain"> GetUser</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">parse_obj</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">data</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">user</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=discriminated-unions>Discriminated unions<a href=#discriminated-unions class=hash-link aria-label="Direct link to Discriminated unions" title="Direct link to Discriminated unions">​</a></h2>
<p>To ensure that data is represented as a correct class we use pydantic's <a href=https://docs.pydantic.dev/dev-v2/usage/types/unions/#discriminated-unions-aka-tagged-unions target=_blank rel="noopener noreferrer">discriminated unions</a>. We add <code>__typename</code> to queries with unions and then use its value as <code>discriminator</code>. Let's take an example schema and query:</p>
<div class="language-gql codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-gql codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">type Query {</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  animal: Animal!</span><br></span><span class=token-line style=color:#393A34><span class="token plain">}</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">interface Animal {</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  name: String!</span><br></span><span class=token-line style=color:#393A34><span class="token plain">}</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">type Dog implements Animal {</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  name: String!</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  dogField: String!</span><br></span><span class=token-line style=color:#393A34><span class="token plain">}</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">type Cat implements Animal {</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  name: String!</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  catField: String!</span><br></span><span class=token-line style=color:#393A34><span class="token plain">}</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">type Fish implements Animal {</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  name: String!</span><br></span><span class=token-line style=color:#393A34><span class="token plain">}</span><br></span></code></pre></div></div>
<div class="language-gql codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-gql codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">query GetAnimal {</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  animal {</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    name</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    ... on Dog {</span><br></span><span class=token-line style=color:#393A34><span class="token plain">      dogField</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    }</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    ... on Cat {</span><br></span><span class=token-line style=color:#393A34><span class="token plain">      catField</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    }</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  }</span><br></span><span class=token-line style=color:#393A34><span class="token plain">}</span><br></span></code></pre></div></div>
<p>From this query and operation, we generate following types:</p>
<div class="language-py codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-py codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token keyword" style=color:#00009f>class</span><span class="token plain"> </span><span class="token class-name">GetAnimal</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">BaseModel</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    animal</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> Union</span><span class="token punctuation" style=color:#393A34>[</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        </span><span class="token string" style=color:#e3116c>"GetAnimalAnimalAnimal"</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>"GetAnimalAnimalDog"</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>"GetAnimalAnimalCat"</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token punctuation" style=color:#393A34>]</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> Field</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">discriminator</span><span class="token operator" style=color:#393A34>=</span><span class="token string" style=color:#e3116c>"typename__"</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token keyword" style=color:#00009f>class</span><span class="token plain"> </span><span class="token class-name">GetAnimalAnimalAnimal</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">BaseModel</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    typename__</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> Literal</span><span class="token punctuation" style=color:#393A34>[</span><span class="token string" style=color:#e3116c>"Animal"</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>"Fish"</span><span class="token punctuation" style=color:#393A34>]</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> Field</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">alias</span><span class="token operator" style=color:#393A34>=</span><span class="token string" style=color:#e3116c>"__typename"</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    name</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token keyword" style=color:#00009f>class</span><span class="token plain"> </span><span class="token class-name">GetAnimalAnimalDog</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">BaseModel</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    typename__</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> Literal</span><span class="token punctuation" style=color:#393A34>[</span><span class="token string" style=color:#e3116c>"Dog"</span><span class="token punctuation" style=color:#393A34>]</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> Field</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">alias</span><span class="token operator" style=color:#393A34>=</span><span class="token string" style=color:#e3116c>"__typename"</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    name</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    dog_field</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> Field</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">alias</span><span class="token operator" style=color:#393A34>=</span><span class="token string" style=color:#e3116c>"dogField"</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token keyword" style=color:#00009f>class</span><span class="token plain"> </span><span class="token class-name">GetAnimalAnimalCat</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">BaseModel</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    typename__</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> Literal</span><span class="token punctuation" style=color:#393A34>[</span><span class="token string" style=color:#e3116c>"Cat"</span><span class="token punctuation" style=color:#393A34>]</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> Field</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">alias</span><span class="token operator" style=color:#393A34>=</span><span class="token string" style=color:#e3116c>"__typename"</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    name</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    cat_field</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> Field</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">alias</span><span class="token operator" style=color:#393A34>=</span><span class="token string" style=color:#e3116c>"catField"</span><span class="token punctuation" style=color:#393A34>)</span><br></span></code></pre></div></div>
<p>We added <code>typename__</code> to this query, and by its value pydantic determines which model to choose.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=leading-underscores>Leading underscores<a href=#leading-underscores class=hash-link aria-label="Direct link to Leading underscores" title="Direct link to Leading underscores">​</a></h2>
<p>Ariadne Codegen 0.7 will remove leading <code>_</code> from field names. Fields with <code>_</code> are ignored by pydantic and it is impossible to save the value of such fields.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=removal-of-mixin-directive-from-operation-sent-to-a-server>Removal of <code>mixin</code> directive from operation sent to a server<a href=#removal-of-mixin-directive-from-operation-sent-to-a-server class=hash-link aria-label="Direct link to removal-of-mixin-directive-from-operation-sent-to-a-server" title="Direct link to removal-of-mixin-directive-from-operation-sent-to-a-server">​</a></h2>
<p>We support a custom <code>mixin</code> directive, which allows extending of generated types. In 0.7 we are removing it from the operation string included in generated client's methods. This directive is only used in the process of generation and caused servers to return errors because of an unknown directive.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=process_schema-plugin-hook><code>process_schema</code> plugin hook<a href=#process_schema-plugin-hook class=hash-link aria-label="Direct link to process_schema-plugin-hook" title="Direct link to process_schema-plugin-hook">​</a></h2>
<p>Plugins can now define a <code>process_schema</code> hook to change schema before Codegen uses it for generation. From now on we allow invalid schemas to be parsed from files or URLs, and then we call this plugin hook. After <code>process_schema</code> is finished, the processed schema must pass <code>graphql.assert_valid_schema</code> validation.</p>
<p>For example, it can be used to add Apollo Federation directives definitions:</p>
<div class="language-py codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-py codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token keyword" style=color:#00009f>class</span><span class="token plain"> </span><span class="token class-name">MyPlugin</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token keyword" style=color:#00009f>def</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>process_schema</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">self</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> schema</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> GraphQLSchema</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>-</span><span class="token operator" style=color:#393A34>></span><span class="token plain"> GraphQLSchema</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        extends_directive_def </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> GraphQLDirective</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>.</span><span class="token punctuation" style=color:#393A34>.</span><span class="token punctuation" style=color:#393A34>.</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        schema</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">directives </span><span class="token operator" style=color:#393A34>+=</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">extends_directive_def</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        </span><span class="token keyword" style=color:#00009f>return</span><span class="token plain"> schema</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=changelog>Changelog<a href=#changelog class=hash-link aria-label="Direct link to Changelog" title="Direct link to Changelog">​</a></h2>
<ul>
<li>Added support for subscriptions as async generators.</li>
<li>Changed how fragments are handled to generate separate module with fragments as mixins.</li>
<li>Fixed <code>ResultTypesGenerator</code> to trigger <code>generate_result_class</code> for each result model.</li>
<li>Changed processing of models fields to trim leading underscores.</li>
<li>Added <code>ShorterResultsPlugin</code> to standard plugins.</li>
<li>Fixed handling of inline fragments inside other fragments.</li>
<li>Changed generated unions to use pydantic's discriminated unions feature.</li>
<li>Replaced HTTPX's <code>json=</code> serializer for query payloads with pydantic's <code>pydantic_encoder</code>.</li>
<li>Removed <code>mixin</code> directive from operation string sent to server.</li>
<li>Fixed <code>ShorterResultsPlugin</code> that generated faulty code for discriminated unions.</li>
<li>Changed generator to ignore unused fragments which should be unpacked in queries.</li>
<li>Changed type hints for parse and serialize methods of scalars to <code>typing.Any</code>.</li>
<li>Added <code>process_schema</code> plugin hook.</li>
</ul></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Blog post page navigation"><a class="pagination-nav__link pagination-nav__link--prev" href=/blog/2023/06/15/ariadne-graphql-proxy><div class=pagination-nav__sublabel>Newer post</div><div class=pagination-nav__label>Introducing Ariadne GraphQL Proxy</div></a><a class="pagination-nav__link pagination-nav__link--next" href=/blog/2023/04/18/ariadne-codegen-0-6><div class=pagination-nav__sublabel>Older post</div><div class=pagination-nav__label>Ariadne Codegen 0.6</div></a></nav></main><div class="col col--2"><div class="tableOfContents_bqdL thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href=#subscriptions class="table-of-contents__link toc-highlight">Subscriptions</a><li><a href=#fragments class="table-of-contents__link toc-highlight">Fragments</a><ul><li><a href=#unions-and-interfaces class="table-of-contents__link toc-highlight">Unions and Interfaces</a></ul><li><a href=#shorterresultsplugin class="table-of-contents__link toc-highlight"><code>ShorterResultsPlugin</code></a><li><a href=#discriminated-unions class="table-of-contents__link toc-highlight">Discriminated unions</a><li><a href=#leading-underscores class="table-of-contents__link toc-highlight">Leading underscores</a><li><a href=#removal-of-mixin-directive-from-operation-sent-to-a-server class="table-of-contents__link toc-highlight">Removal of <code>mixin</code> directive from operation sent to a server</a><li><a href=#process_schema-plugin-hook class="table-of-contents__link toc-highlight"><code>process_schema</code> plugin hook</a><li><a href=#changelog class="table-of-contents__link toc-highlight">Changelog</a></ul></div></div></div></div></div><footer class="theme-layout-footer footer"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class=footer__title>Ariadne ecosystem</div><ul class="footer__items clean-list"><li class=footer__item><a href="https://github.com/mirumee/ariadne?tab=readme-ov-file" target=_blank rel="noopener noreferrer" class=footer__link-item>Ariadne GraphQL Server<svg width=13.5 height=13.5 aria-hidden=true class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a><li class=footer__item><a href="https://github.com/mirumee/ariadne-codegen?tab=readme-ov-file" target=_blank rel="noopener noreferrer" class=footer__link-item>Ariadne GraphQL Client<svg width=13.5 height=13.5 aria-hidden=true class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a><li class=footer__item><a href="https://github.com/mirumee/ariadne-graphql-modules?tab=readme-ov-file" target=_blank rel="noopener noreferrer" class=footer__link-item>Ariadne GraphQL Modules<svg width=13.5 height=13.5 aria-hidden=true class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a><li class=footer__item><a href="https://github.com/mirumee/ariadne-auth?tab=readme-ov-file" target=_blank rel="noopener noreferrer" class=footer__link-item>Ariadne Auth<svg width=13.5 height=13.5 aria-hidden=true class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a><li class=footer__item><a href="https://github.com/mirumee/ariadne-lambda?tab=readme-ov-file" target=_blank rel="noopener noreferrer" class=footer__link-item>Ariadne AWS Lambda Extension<svg width=13.5 height=13.5 aria-hidden=true class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a></ul></div><div class="theme-layout-footer-column col footer__col"><div class=footer__title>Community</div><ul class="footer__items clean-list"><li class=footer__item><a href=mailto:ariadne@mirumee.com target=_blank rel="noopener noreferrer" class=footer__link-item>Email<svg width=13.5 height=13.5 aria-hidden=true class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a><li class=footer__item><a href=https://x.com/AriadneGraphQL target=_blank rel="noopener noreferrer" class=footer__link-item>X<svg width=13.5 height=13.5 aria-hidden=true class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a></ul></div><div class="theme-layout-footer-column col footer__col"><div class=footer__title>More</div><ul class="footer__items clean-list"><li class=footer__item><a href=https://mirumee.com/blog target=_blank rel="noopener noreferrer" class=footer__link-item>Blog<svg width=13.5 height=13.5 aria-hidden=true class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a><li class=footer__item><a href="https://github.com/mirumee/Ariadne?tab=readme-ov-file#ariadne-ecosystem" target=_blank rel="noopener noreferrer" class=footer__link-item>GitHub<svg width=13.5 height=13.5 aria-hidden=true class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a></ul></div></div><div class="footer__bottom text--center"><div class=footer__copyright>Copyright © 2025  Mirumee Software.</div></div></div></footer></div>