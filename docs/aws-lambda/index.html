<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>AWS Lambda · Ariadne</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="&lt;h1&gt;&lt;a class=&quot;anchor&quot; aria-hidden=&quot;true&quot; id=&quot;aws-lambda&quot;&gt;&lt;/a&gt;&lt;a href=&quot;#aws-lambda&quot; aria-hidden=&quot;true&quot; class=&quot;hash-link&quot;&gt;&lt;svg class=&quot;hash-link-icon&quot; aria-hidden=&quot;true&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;AWS Lambda&lt;/h1&gt;
"/><meta name="docsearch:version" content="0.24"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="AWS Lambda · Ariadne"/><meta property="og:type" content="website"/><meta property="og:url" content="https://ariadnegraphql.org/"/><meta property="og:description" content="&lt;h1&gt;&lt;a class=&quot;anchor&quot; aria-hidden=&quot;true&quot; id=&quot;aws-lambda&quot;&gt;&lt;/a&gt;&lt;a href=&quot;#aws-lambda&quot; aria-hidden=&quot;true&quot; class=&quot;hash-link&quot;&gt;&lt;svg class=&quot;hash-link-icon&quot; aria-hidden=&quot;true&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;AWS Lambda&lt;/h1&gt;
"/><meta property="og:image" content="https://ariadnegraphql.org/img/share-image.png"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://ariadnegraphql.org/img/twitter-image.png"/><link rel="shortcut icon" href="/img/favicon.ico"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/atom-one-light.min.css"/><link rel="alternate" type="application/atom+xml" href="https://ariadnegraphql.org/blog/atom.xml" title="Ariadne Blog ATOM Feed"/><link rel="alternate" type="application/rss+xml" href="https://ariadnegraphql.org/blog/feed.xml" title="Ariadne Blog RSS Feed"/><script>
              (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
              (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
              m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
              })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

              ga('create', 'UA-10159761-23', 'auto');
              ga('send', 'pageview');
            </script><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script src="https://unpkg.com/vanilla-back-to-top@7.1.14/dist/vanilla-back-to-top.min.js"></script><script>
        document.addEventListener('DOMContentLoaded', function() {
          addBackToTop(
            {"zIndex":100}
          )
        });
        </script><link rel="stylesheet" href="/css/prism.css"/><link rel="stylesheet" href="/css/main.css"/><script src="/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/"><img class="logo" src="/img/logo-horizontal.png" alt="Ariadne"/></a><a href="/versions"><h3>0.24</h3></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search" title="Search"/></li><li class="siteNavGroupActive"><a href="/docs/intro" target="_self">Docs</a></li><li class=""><a href="/blog/" target="_self">Blog</a></li><li class=""><a href="/community" target="_self">Community</a></li><li class=""><a href="https://github.com/mirumee/ariadne" target="_self">GitHub</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>Servers</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle">Docs</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/intro">Introduction</a></li><li class="navListItem"><a class="navItem" href="/docs/resolvers">Resolvers</a></li><li class="navListItem"><a class="navItem" href="/docs/mutations">Mutations</a></li><li class="navListItem"><a class="navItem" href="/docs/inputs">Inputs</a></li><li class="navListItem"><a class="navItem" href="/docs/error-messaging">Error messaging</a></li><li class="navListItem"><a class="navItem" href="/docs/case-conversion">Name case conversion</a></li><li class="navListItem"><a class="navItem" href="/docs/fragments">Fragments</a></li><li class="navListItem"><a class="navItem" href="/docs/scalars">Custom scalars</a></li><li class="navListItem"><a class="navItem" href="/docs/enums">Enumeration types</a></li><li class="navListItem"><a class="navItem" href="/docs/unions">Union types</a></li><li class="navListItem"><a class="navItem" href="/docs/interfaces">Interface types</a></li><li class="navListItem"><a class="navItem" href="/docs/subscriptions">Subscriptions</a></li><li class="navListItem"><a class="navItem" href="/docs/dataloaders">Dataloaders</a></li><li class="navListItem"><a class="navItem" href="/docs/file-uploads">File uploads</a></li><li class="navListItem"><a class="navItem" href="/docs/documenting-schema">Documenting schema</a></li><li class="navListItem"><a class="navItem" href="/docs/modularization">Modularization</a></li><li class="navListItem"><a class="navItem" href="/docs/bindables">Bindables</a></li><li class="navListItem"><a class="navItem" href="/docs/schema-directives">Schema directives</a></li><li class="navListItem"><a class="navItem" href="/docs/local-development">Local development</a></li><li class="navListItem"><a class="navItem" href="/docs/logging">Logging</a></li><li class="navListItem"><a class="navItem" href="/docs/explorers">GraphQL explorers</a></li><li class="navListItem"><a class="navItem" href="/docs/apollo-federation">Apollo Federation</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Monitoring</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/open-telemetry">OpenTelemetry</a></li><li class="navListItem"><a class="navItem" href="/docs/open-tracing">OpenTracing</a></li><li class="navListItem"><a class="navItem" href="/docs/apollo-tracing">Apollo Tracing</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Security</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/security-overview">Security Overview</a></li><li class="navListItem"><a class="navItem" href="/docs/hiding-field-suggestions">Hiding field suggestions</a></li><li class="navListItem"><a class="navItem" href="/docs/disabling-stack-traces">Disabling stack traces</a></li><li class="navListItem"><a class="navItem" href="/docs/continuous-security-testing">Continuous security testing</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Servers</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/asgi">ASGI application</a></li><li class="navListItem"><a class="navItem" href="/docs/wsgi">WSGI application</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/docs/aws-lambda">AWS Lambda</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Integrations</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/django-integration">Django</a></li><li class="navListItem"><a class="navItem" href="/docs/fastapi-integration">FastAPI</a></li><li class="navListItem"><a class="navItem" href="/docs/flask-integration">Flask</a></li><li class="navListItem"><a class="navItem" href="/docs/starlette-integration">Starlette</a></li><li class="navListItem"><a class="navItem" href="/docs/other-integrations">Other technologies</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Extensions</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/extensions">Extension system</a></li><li class="navListItem"><a class="navItem" href="/docs/middleware">Middleware</a></li><li class="navListItem"><a class="navItem" href="/docs/query-validators">Query validators</a></li><li class="navListItem"><a class="navItem" href="/docs/query-stack">Customizing Query Stack</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">API reference</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/api-reference">ariadne</a></li><li class="navListItem"><a class="navItem" href="/docs/asgi-reference">ariadne.asgi</a></li><li class="navListItem"><a class="navItem" href="/docs/asgi-handlers-reference">ariadne.asgi.handlers</a></li><li class="navListItem"><a class="navItem" href="/docs/constants-reference">ariadne.constants</a></li><li class="navListItem"><a class="navItem" href="/docs/exceptions-reference">ariadne.exceptions</a></li><li class="navListItem"><a class="navItem" href="/docs/types-reference">ariadne.types</a></li><li class="navListItem"><a class="navItem" href="/docs/wsgi-reference">ariadne.wsgi</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Other</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/logo">Ariadne logo</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              const headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                if (event.target.tagName === 'A') {
                  document.body.classList.remove('tocActive');
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1 class="postHeaderTitle">AWS Lambda</h1></header><article><div><span><h1><a class="anchor" aria-hidden="true" id="aws-lambda"></a><a href="#aws-lambda" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>AWS Lambda</h1>
<p>Multiple ways to implement an AWS Lambda function for GraphQL using Ariadne exist.</p>
<p>This document presents a selected few of those, but its aim is not to be an <strong>exhaustive</strong> list of all approaches to using Ariadne on AWS Lambda.</p>
<h2><a class="anchor" aria-hidden="true" id="deploying-asgi-application-with-ariadne-lambda"></a><a href="#deploying-asgi-application-with-ariadne-lambda" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Deploying ASGI Application with Ariadne Lambda</h2>
<p>Ariadne Lambda is an extension to Ariadne itself to enable running <a href="/docs/asgi">ASGI</a> applications on AWS Lambda:</p>
<pre><code class="hljs css language-python"><span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> Any

<span class="hljs-keyword">from</span> ariadne <span class="hljs-keyword">import</span> QueryType, gql, make_executable_schema
<span class="hljs-keyword">from</span> ariadne_lambda.graphql <span class="hljs-keyword">import</span> GraphQLLambda
<span class="hljs-keyword">from</span> asgiref.sync <span class="hljs-keyword">import</span> async_to_sync
<span class="hljs-keyword">from</span> aws_lambda_powertools.utilities.typing <span class="hljs-keyword">import</span> LambdaContext

type_defs = gql(
    <span class="hljs-string">"""
    type Query {
        hello: String!
    }
"""</span>)
query = QueryType()

<span class="hljs-meta">@query.field("hello")</span>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">resolve_hello</span><span class="hljs-params">(_, info)</span>:</span>
    request = info.context[<span class="hljs-string">"request"</span>]
    user_agent = request.headers.get(<span class="hljs-string">"user-agent"</span>, <span class="hljs-string">"guest"</span>)
    <span class="hljs-keyword">return</span> <span class="hljs-string">"Hello, %s!"</span> % user_agent

schema = make_executable_schema(type_defs, query)
graphql_app = GraphQLLambda(schema=schema)

<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">graphql_http_handler</span><span class="hljs-params">(event: dict[str, Any], context: LambdaContext)</span>:</span>
    <span class="hljs-keyword">return</span> async_to_sync(graphql_app)(event, context)
</code></pre>
<p>This approach is recommended because it gives immediate availability of Ariadne's features through the <code>GraphQL</code> object's options and doesn't require the implementation of a custom translation layer between the GraphQL engine and AWS Lambda.</p>
<blockquote>
<p><strong>Note:</strong> If you need your Lambda function to offer other API endpoints in addition to GraphQL, you can combine your Ariadne app with <a href="/docs/starlette-integration">Starlette</a> or <a href="/docs/fastapi-integration">FastAPI</a> along with <a href="https://github.com/mirumee/lynara">Lynara</a>, which wraps the app to handle HTTP requests from AWS.</p>
</blockquote>
<h2><a class="anchor" aria-hidden="true" id="minimal-lambda-handler-example"></a><a href="#minimal-lambda-handler-example" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Minimal Lambda Handler Example</h2>
<p>If you want to skip the HTTP stack altogether, you can execute the queries directly using the <a href="/docs/api-reference#graphql_sync"><code>graphql_sync</code></a>:</p>
<pre><code class="hljs css language-python"><span class="hljs-keyword">import</span> json
<span class="hljs-keyword">import</span> logging

<span class="hljs-keyword">from</span> ariadne <span class="hljs-keyword">import</span> QueryType, graphql_sync, make_executable_schema, gql

logger = logging.getLogger()

type_defs = gql(
    <span class="hljs-string">"""
    type Query {
        hello: String!
    }
"""</span>)

query_type = QueryType()

<span class="hljs-meta">@query_type.field("hello")</span>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">resolve_hello</span><span class="hljs-params">(_, info)</span>:</span>
    http_context = info.context[<span class="hljs-string">"requestContext"</span>][<span class="hljs-string">"http"</span>]
    user_agent = http_context.get(<span class="hljs-string">"userAgent"</span>) <span class="hljs-keyword">or</span> <span class="hljs-string">"Anon"</span>
    <span class="hljs-keyword">return</span> <span class="hljs-string">f"Hello <span class="hljs-subst">{user_agent}</span>!"</span>

schema = make_executable_schema(type_defs, query_type)

<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">handler</span><span class="hljs-params">(event: dict, _)</span>:</span>
    <span class="hljs-keyword">try</span>:
        data = json.loads(event.get(<span class="hljs-string">"body"</span>) <span class="hljs-keyword">or</span> <span class="hljs-string">""</span>)
    <span class="hljs-keyword">except</span> ValueError <span class="hljs-keyword">as</span> exc:
        <span class="hljs-keyword">return</span> response({<span class="hljs-string">"error"</span>: <span class="hljs-string">f"Failed to parse JSON: <span class="hljs-subst">{exc}</span>"</span>}, <span class="hljs-number">405</span>)

    success, result = graphql_sync(
        schema,
        data,
        context_value=event,
        logger=logger,
    )

    <span class="hljs-keyword">return</span> response(result, <span class="hljs-number">200</span> <span class="hljs-keyword">if</span> success <span class="hljs-keyword">else</span> <span class="hljs-number">400</span>)

<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">response</span><span class="hljs-params">(body: dict, status_code: int = <span class="hljs-number">200</span>)</span>:</span>
    <span class="hljs-keyword">return</span> {
        <span class="hljs-string">"statusCode"</span>: status_code,
        <span class="hljs-string">"headers"</span>: {
            <span class="hljs-string">"Content-Type"</span>: <span class="hljs-string">"application/json"</span>
        },
        <span class="hljs-string">"body"</span>: json.dumps(body),
    }
</code></pre>
<p>This Lambda function will expect a JSON request with at least one key, a <code>query</code> containing the GraphQL query.</p>
<h3><a class="anchor" aria-hidden="true" id="asynchronous-example"></a><a href="#asynchronous-example" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Asynchronous Example</h3>
<p>In case you want to run your handler asynchronously, you'll need to run it in an event loop.</p>
<p>This can be done manually or by decorating the async handler with the <code>async_to_sync</code> decorator from the <code>asgiref</code> package:</p>
<pre><code class="hljs css language-python"><span class="hljs-keyword">import</span> json
<span class="hljs-keyword">import</span> logging

<span class="hljs-keyword">from</span> ariadne <span class="hljs-keyword">import</span> QueryType, graphql, make_executable_schema, gql
<span class="hljs-keyword">from</span> asgiref.sync <span class="hljs-keyword">import</span> async_to_sync

logger = logging.getLogger()

type_defs = gql(
    <span class="hljs-string">"""
    type Query {
        hello: String!
    }
"""</span>)

query_type = QueryType()

<span class="hljs-meta">@query_type.field("hello")</span>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">resolve_hello</span><span class="hljs-params">(_, info)</span>:</span>
    http_context = info.context[<span class="hljs-string">"requestContext"</span>][<span class="hljs-string">"http"</span>]
    user_agent = http_context.get(<span class="hljs-string">"userAgent"</span>) <span class="hljs-keyword">or</span> <span class="hljs-string">"Anon"</span>
    <span class="hljs-keyword">return</span> <span class="hljs-string">f"Hello <span class="hljs-subst">{user_agent}</span>!"</span>

schema = make_executable_schema(type_defs, query_type)

<span class="hljs-meta">@async_to_sync</span>
<span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">handler</span><span class="hljs-params">(event: dict, _)</span>:</span>
    <span class="hljs-keyword">try</span>:
        data = json.loads(event.get(<span class="hljs-string">"body"</span>) <span class="hljs-keyword">or</span> <span class="hljs-string">""</span>)
    <span class="hljs-keyword">except</span> ValueError <span class="hljs-keyword">as</span> exc:
        <span class="hljs-keyword">return</span> response({<span class="hljs-string">"error"</span>: <span class="hljs-string">f"Failed to parse JSON: <span class="hljs-subst">{exc}</span>"</span>}, <span class="hljs-number">405</span>)

    success, result = <span class="hljs-keyword">await</span> graphql(
        schema,
        data,
        context_value=event,
        logger=logger,
    )

    <span class="hljs-keyword">return</span> response(result, <span class="hljs-number">200</span> <span class="hljs-keyword">if</span> success <span class="hljs-keyword">else</span> <span class="hljs-number">400</span>)

<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">response</span><span class="hljs-params">(body: dict, status_code: int = <span class="hljs-number">200</span>)</span>:</span>
    <span class="hljs-keyword">return</span> {
        <span class="hljs-string">"statusCode"</span>: status_code,
        <span class="hljs-string">"headers"</span>: {
            <span class="hljs-string">"Content-Type"</span>: <span class="hljs-string">"application/json"</span>
        },
        <span class="hljs-string">"body"</span>: json.dumps(body),
    }
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="local-testing"></a><a href="#local-testing" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Local Testing</h2>
<p>If you want to test your Lambda functions locally, you can use the repository <a href="https://github.com/mirumee/smyth">Smyth</a>, which supports local development of Lambdas. This allows you to simulate the AWS Lambda environment on your local machine, making it easier to develop and debug your functions before deploying them to AWS.</p>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="/docs/wsgi"><span class="arrow-prev">← </span><span>WSGI application</span></a><a class="docs-next button" href="/docs/django-integration"><span>Django</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#deploying-asgi-application-with-ariadne-lambda">Deploying ASGI Application with Ariadne Lambda</a></li><li><a href="#minimal-lambda-handler-example">Minimal Lambda Handler Example</a><ul class="toc-headings"><li><a href="#asynchronous-example">Asynchronous Example</a></li></ul></li><li><a href="#local-testing">Local Testing</a></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/" class="nav-home"><img src="/img/icon.png" alt="Ariadne" height="107" width="128"/></a><div class="footerNavSpacer"></div><div class="footerNavTwoColumn"><h5>Documentation</h5><a href="/docs/intro.html">Introduction</a><a href="/docs/resolvers.html">Resolvers</a><a href="/docs/mutations.html">Mutations</a><a href="/docs/subscriptions.html">Subscriptions</a><a href="/docs/django-integration.html">Django integration</a><a href="/docs/flask-integration.html">Flask integration</a><a href="/docs/starlette-integration.html">Starlette integration</a><a href="/docs/other-integrations.html">Other integrations</a><a href="/docs/api-reference.html">API Reference</a><a href="/docs/logo.html">Logo</a></div><div><h5>Community</h5><a href="https://github.com/mirumee/ariadne/discussions/">Discuss</a><a href="https://github.com/mirumee/ariadne">GitHub</a><a class="github-button" href="https://github.com/mirumee/ariadne" data-icon="octicon-star" data-count-href="/mirumee/ariadne/stargazers" data-show-count="true" data-count-aria-label="# stargazers on GitHub" aria-label="Star this project on GitHub">Star</a></div></section><section class="copyright"><a href="https://mirumee.com">Copyright © 2025 Mirumee Software</a><a href="https://mirumee.com">Ariadne is crafted with love by<img src="/img/mirumee.png" alt="Mirumee"/></a></section></footer></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>window.twttr=(function(d,s, id){var js,fjs=d.getElementsByTagName(s)[0],t=window.twttr||{};if(d.getElementById(id))return t;js=d.createElement(s);js.id=id;js.src='https://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js, fjs);t._e = [];t.ready = function(f) {t._e.push(f);};return t;}(document, 'script', 'twitter-wjs'));</script><script>
                document.addEventListener('keyup', function(e) {
                  if (e.target !== document.body) {
                    return;
                  }
                  // keyCode for '/' (slash)
                  if (e.keyCode === 191) {
                    const search = document.getElementById('search_input_react');
                    search && search.focus();
                  }
                });
              </script><script>
              var search = docsearch({
                
                apiKey: '507581234da84aebc8fe9918f530b714',
                indexName: 'ariadnegraphql',
                inputSelector: '#search_input_react'
              });
            </script></body></html>