<!doctype html><html lang=en dir=ltr class="docs-wrapper plugin-docs plugin-id-server docs-version-0.4.0 docs-doc-page docs-doc-id-scalars" data-has-hydrated=false><meta charset=UTF-8><meta name=generator content="Docusaurus v3.8.1"><title data-rh=true>Custom scalars | Ariadne · Python GraphQL Schema-first</title><meta data-rh=true name=viewport content="width=device-width, initial-scale=1.0"><meta data-rh=true name=twitter:card content=summary_large_image><meta data-rh=true property=og:image content=https://ariadnegraphql.org/img/docusaurus-social-card.jpg><meta data-rh=true name=twitter:image content=https://ariadnegraphql.org/img/docusaurus-social-card.jpg><meta data-rh=true property=og:url content=https://ariadnegraphql.org/server/0.4.0/scalars><meta data-rh=true property=og:locale content=en><meta data-rh=true name=docusaurus_locale content=en><meta data-rh=true name=docsearch:language content=en><meta data-rh=true name=docusaurus_version content=0.4.0><meta data-rh=true name=docusaurus_tag content=docs-server-0.4.0><meta data-rh=true name=docsearch:version content=0.4.0><meta data-rh=true name=docsearch:docusaurus_tag content=docs-server-0.4.0><meta data-rh=true property=og:title content="Custom scalars | Ariadne · Python GraphQL Schema-first"><meta data-rh=true name=description content="Custom scalars allow you to convert your Python objects to a JSON-serializable form in query results, as well as convert those JSON forms back to Python objects when they are passed as arguments or input values."><meta data-rh=true property=og:description content="Custom scalars allow you to convert your Python objects to a JSON-serializable form in query results, as well as convert those JSON forms back to Python objects when they are passed as arguments or input values."><link data-rh=true rel=icon href=/img/favicon.ico><link data-rh=true rel=canonical href=https://ariadnegraphql.org/server/0.4.0/scalars><link data-rh=true rel=alternate href=https://ariadnegraphql.org/server/0.4.0/scalars hreflang=en><link data-rh=true rel=alternate href=https://ariadnegraphql.org/server/0.4.0/scalars hreflang=x-default><link data-rh=true rel=preconnect href=https://BYJBYPP90Q-dsn.algolia.net crossorigin=anonymous><script data-rh=true type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","item":"https://ariadnegraphql.org/server/0.4.0/scalars","name":"Custom scalars","position":1}]}</script><link rel=alternate type=application/rss+xml href=/blog/rss.xml title="Ariadne · Python GraphQL Schema-first RSS Feed"><link rel=alternate type=application/atom+xml href=/blog/atom.xml title="Ariadne · Python GraphQL Schema-first Atom Feed"><link rel=preconnect href=https://www.google-analytics.com><link rel=preconnect href=https://www.googletagmanager.com><script async src="https://www.googletagmanager.com/gtag/js?id=G-5LQNZWZVVS"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-5LQNZWZVVS",{anonymize_ip:!0})</script><link rel=search type=application/opensearchdescription+xml title="Ariadne · Python GraphQL Schema-first" href=/opensearch.xml><link rel=stylesheet href=/assets/css/styles.19ff8338.css><script src=/assets/js/runtime~main.ff0e0b49.js defer></script><script src=/assets/js/main.54e665a8.js defer></script><body class=navigation-with-keyboard><svg xmlns=http://www.w3.org/2000/svg style="display: none;"><defs>
<symbol id=theme-svg-external-link viewBox="0 0 24 24"><path fill=currentColor d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t="light",e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",e||t),document.documentElement.setAttribute("data-theme-choice",e||t)}(),function(){try{for(var[t,e]of new URLSearchParams(window.location.search).entries())if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id=__docusaurus><link rel=preload as=image href=/img/logo-horizontal-sm.png><div role=region aria-label="Skip to main content"><a class=skipToContent_fXgn href=#__docusaurus_skipToContent_fallback>Skip to main content</a></div><nav aria-label=Main class="theme-layout-navbar navbar navbar--fixed-top"><div class=navbar__inner><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded=false class="navbar__toggle clean-btn" type=button><svg width=30 height=30 viewBox="0 0 30 30" aria-hidden=true><path stroke=currentColor stroke-linecap=round stroke-miterlimit=10 stroke-width=2 d="M4 7h22M4 15h22M4 23h22"/></svg></button><a class=navbar__brand href=/><div class=navbar__logo><img src=/img/logo-horizontal-sm.png alt="Ariadne Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src=/img/logo-horizontal-sm.png alt="Ariadne Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div></a><a aria-current=page class="navbar__item navbar__link navbar__link--active" href=/server/0.4.0/intro>Server</a><div class="navbar__item dropdown dropdown--hoverable"><a aria-current=page class="navbar__link active" aria-haspopup=true aria-expanded=false role=button href=/server/0.4.0/scalars>0.4.0</a><ul class=dropdown__menu><li><a class=dropdown__link href=/server/next/scalars>Next</a><li><a class=dropdown__link href=/server/scalars>0.25</a><li><a class=dropdown__link href=/server/0.24/scalars>0.24</a><li><a class=dropdown__link href=/server/0.23/scalars>0.23</a><li><a class=dropdown__link href=/server/0.22/scalars>0.22</a><li><a class=dropdown__link href=/server/0.21/scalars>0.21</a><li><a class=dropdown__link href=/server/0.20/scalars>0.20</a><li><a class=dropdown__link href=/server/0.19/scalars>0.19</a><li><a class=dropdown__link href=/server/0.18/scalars>0.18</a><li><a class=dropdown__link href=/server/0.17/scalars>0.17</a><li><a class=dropdown__link href=/server/0.16/scalars>0.16</a><li><a class=dropdown__link href=/server/0.15/scalars>0.15</a><li><a class=dropdown__link href=/server/0.14.0/scalars>0.14.0</a><li><a class=dropdown__link href=/server/0.13.0/scalars>0.13.0</a><li><a class=dropdown__link href=/server/0.12.0/scalars>0.12.0</a><li><a class=dropdown__link href=/server/0.11.0/scalars>0.11.0</a><li><a class=dropdown__link href=/server/0.10.0/scalars>0.10.0</a><li><a class=dropdown__link href=/server/0.9.0/scalars>0.9.0</a><li><a class=dropdown__link href=/server/0.8.0/scalars>0.8.0</a><li><a class=dropdown__link href=/server/0.7.0/scalars>0.7.0</a><li><a class=dropdown__link href=/server/0.6.0/scalars>0.6.0</a><li><a class=dropdown__link href=/server/0.5.0/scalars>0.5.0</a><li><a aria-current=page class="dropdown__link dropdown__link--active" href=/server/0.4.0/scalars>0.4.0</a></ul></div><a class="navbar__item navbar__link" href=/client/intro>Client</a><div class="navbar__item dropdown dropdown--hoverable"><a class=navbar__link aria-haspopup=true aria-expanded=false role=button href=/client/intro>0.15.3</a><ul class=dropdown__menu><li><a class=dropdown__link href=/client/next/intro>Next</a><li><a class=dropdown__link href=/client/intro>0.15.3</a></ul></div></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a class="navbar__item navbar__link" href=/blog>Blog</a><a class="navbar__item navbar__link" href=/community>Community</a><a href="https://github.com/mirumee/Ariadne?tab=readme-ov-file#ariadne-ecosystem" target=_blank rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width=13.5 height=13.5 aria-hidden=true class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a><div class=navbarSearchContainer_Bca1><button type=button class="DocSearch DocSearch-Button" aria-label="Search (Command+K)"><span class=DocSearch-Button-Container><svg width=20 height=20 class=DocSearch-Search-Icon viewBox="0 0 20 20" aria-hidden=true><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke=currentColor fill=none fill-rule=evenodd stroke-linecap=round stroke-linejoin=round /></svg><span class=DocSearch-Button-Placeholder>Search</span></span><span class=DocSearch-Button-Keys></span></button></div></div></div><div role=presentation class=navbar-sidebar__backdrop></div></nav><div id=__docusaurus_skipToContent_fallback class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class=docsWrapper_hBAB><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type=button></button><div class=docRoot_UBD9><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class=sidebarViewport_aRkj><div class=sidebar_njMd><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role=button aria-expanded=true href=/server/0.4.0/intro>Docs</a></div><ul class=menu__list><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/server/0.4.0/intro>Introduction</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/server/0.4.0/resolvers>Resolvers</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/server/0.4.0/mutations>Mutations</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/server/0.4.0/error-messaging>Error messaging</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current=page tabindex=0 href=/server/0.4.0/scalars>Custom scalars</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/server/0.4.0/enums>Enumeration types</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/server/0.4.0/unions>Union types</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/server/0.4.0/interfaces>Interface types</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/server/0.4.0/subscriptions>Subscriptions</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/server/0.4.0/documenting-schema>Documenting schema</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/server/0.4.0/modularization>Modularization</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/server/0.4.0/bindables>Bindables</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/server/0.4.0/local-development>Local development</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/server/0.4.0/logging>Logging</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/server/0.4.0/logo>Ariadne logo</a></ul><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false href=/server/0.4.0/asgi>Servers</a></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false href=/server/0.4.0/django-integration>Integrations</a></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false href=/server/0.4.0/api-reference>API reference</a></div></ul></nav></div></div></aside><main class=docMainContainer_TBSr><div class="container padding-top--md padding-bottom--lg"><div class=row><div class="col docItemCol_VOVn"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role=alert><div>This is documentation for <!-- -->Ariadne · Python GraphQL Schema-first<!-- --> <b>0.4.0</b>, which is no longer actively maintained.</div><div class=margin-top--md>For up-to-date documentation, see the <b><a href=/server/scalars>latest version</a></b> (<!-- -->0.25<!-- -->).</div></div><div class=docItemContainer_Djhp><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label=Breadcrumbs><ul class=breadcrumbs><li class=breadcrumbs__item><a aria-label="Home page" class=breadcrumbs__link href=/><svg viewBox="0 0 24 24" class=breadcrumbHomeIcon_YNFT><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill=currentColor /></svg></a><li class=breadcrumbs__item><span class=breadcrumbs__link>Docs</span><li class="breadcrumbs__item breadcrumbs__item--active"><span class=breadcrumbs__link>Custom scalars</span></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: 0.4.0</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type=button class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Custom scalars</h1></header><p>Custom scalars allow you to convert your Python objects to a JSON-serializable form in query results, as well as convert those JSON forms back to Python objects when they are passed as arguments or <code>input</code> values.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=example-read-only-scalar>Example read-only scalar<a href=#example-read-only-scalar class=hash-link aria-label="Direct link to Example read-only scalar" title="Direct link to Example read-only scalar">​</a></h2>
<p>Consider this API defining <code>Story</code> type with <code>publishedOn</code> field:</p>
<div class="language-graphql codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-graphql codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token keyword" style=color:#00009f>type</span><span class="token plain"> </span><span class="token class-name">Story</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token attr-name" style=color:#00a4db>content</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> </span><span class="token scalar">String</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token attr-name" style=color:#00a4db>publishedOn</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> </span><span class="token scalar">String</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><br></span></code></pre></div></div>
<p>The <code>publishedOn</code> field resolver returns an instance of type <code>datetime</code>, but in the API this field is defined as <code>String</code>. This means that our datetime will be passed through the <code>str()</code> before being returned to client:</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-json codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token property" style=color:#36acaa>"publishedOn"</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>"2018-10-26 17:28:54.416434"</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><br></span></code></pre></div></div>
<p>This may look acceptable, but there are better formats to serialize timestamps for later deserialization on the client, like ISO 8601. This conversion could be performed in a dedicated resolver:</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-python codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token keyword" style=color:#00009f>def</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>resolve_published_on</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">obj</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>*</span><span class="token plain">_</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token keyword" style=color:#00009f>return</span><span class="token plain"> obj</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">published_on</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">isoformat</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><br></span></code></pre></div></div>
<p>However, the developer now has to remember to define a custom resolver for every field that returns <code>datetime</code>. This really adds a boilerplate to the API, and makes it harder to use abstractions auto-generating the resolvers for you.</p>
<p>Instead, GraphQL API can be told how to serialize dates by defining the custom scalar type:</p>
<div class="language-graphql codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-graphql codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token keyword" style=color:#00009f>type</span><span class="token plain"> </span><span class="token class-name">Story</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token attr-name" style=color:#00a4db>content</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> </span><span class="token scalar">String</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token attr-name" style=color:#00a4db>publishedOn</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> </span><span class="token class-name">Datetime</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token keyword" style=color:#00009f>scalar</span><span class="token plain"> </span><span class="token class-name">Datetime</span><br></span></code></pre></div></div>
<p>If you try to query this field now, you will get an error:</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-json codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token property" style=color:#36acaa>"error"</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>"Unexpected token A in JSON at position 0"</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><br></span></code></pre></div></div>
<p>This is because a custom scalar has been defined, but it's currently missing logic for serializing Python values to JSON form and <code>Datetime</code> instances are not JSON serializable by default.</p>
<p>We need to add a special serializing resolver to our <code>Datetime</code> scalar that will implement the logic we are expecting. Ariadne provides <code>ScalarType</code> class that enables just that:</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-python codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token keyword" style=color:#00009f>from</span><span class="token plain"> ariadne </span><span class="token keyword" style=color:#00009f>import</span><span class="token plain"> ScalarType</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">datetime_scalar </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> ScalarType</span><span class="token punctuation" style=color:#393A34>(</span><span class="token string" style=color:#e3116c>"Datetime"</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token decorator annotation punctuation" style=color:#393A34>@datetime_scalar</span><span class="token decorator annotation punctuation" style=color:#393A34>.</span><span class="token decorator annotation punctuation" style=color:#393A34>serializer</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token keyword" style=color:#00009f>def</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>serialize_datetime</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">value</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token keyword" style=color:#00009f>return</span><span class="token plain"> value</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">isoformat</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><br></span></code></pre></div></div>
<p>Include the <code>datetime_scalar</code> in the list of <code>resolvers</code> passed to your GraphQL server. Custom serialization logic will now be used when a resolver for the <code>Datetime</code> field returns a value other than <code>None</code>:</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-json codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token property" style=color:#36acaa>"publishedOn"</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>"2018-10-26T17:45:08.805278"</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><br></span></code></pre></div></div>
<p>We can now reuse our custom scalar across the API to serialize <code>datetime</code> instances in a standardized format that our clients will understand.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=scalars-as-input>Scalars as input<a href=#scalars-as-input class=hash-link aria-label="Direct link to Scalars as input" title="Direct link to Scalars as input">​</a></h2>
<p>What will happen if now we create a field or mutation that defines an argument of the type <code>Datetime</code>? We can find out using a basic resolver:</p>
<div class="language-graphql codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-graphql codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token keyword" style=color:#00009f>type</span><span class="token plain"> </span><span class="token class-name">Query</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token attr-name" style=color:#00a4db>stories</span><span class="token punctuation" style=color:#393A34>(</span><span class="token attr-name" style=color:#00a4db>publishedOn</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> </span><span class="token class-name">Datetime</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>[</span><span class="token class-name">Story</span><span class="token operator" style=color:#393A34>!</span><span class="token punctuation" style=color:#393A34>]</span><span class="token operator" style=color:#393A34>!</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><br></span></code></pre></div></div>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-python codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token keyword" style=color:#00009f>def</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>resolve_stories</span><span class="token punctuation" style=color:#393A34>(</span><span class="token operator" style=color:#393A34>*</span><span class="token plain">_</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>**</span><span class="token plain">data</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token keyword" style=color:#00009f>print</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">data</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">get</span><span class="token punctuation" style=color:#393A34>(</span><span class="token string" style=color:#e3116c>"publishedOn"</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain">  </span><span class="token comment" style=color:#999988;font-style:italic># what value will "publishedOn" be?</span><br></span></code></pre></div></div>
<p><code>data.get("publishedOn")</code> will print whatever value was passed to the argument, coerced to the respective Python type. For some scalars this may do the trick, but for this one it's expected that input gets converted back to the <code>datetime</code> instance.</p>
<p>To turn our <em>read-only</em> scalar into <em>bidirectional</em> scalar, we will need to add two functions to the <code>ScalarType</code> that was created in the previous step:</p>
<ul>
<li><code>value_parser(value)</code> that will be used when the scalar value is passed as part of query <code>variables</code>.</li>
<li><code>literal_parser(ast)</code> that will be used when the scalar value is passed as part of query content (e.g. <code>{ stories(publishedOn: "2018-10-26T17:45:08.805278") { ... } }</code>).</li>
</ul>
<p>Those functions can be implemented as such:</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-python codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token decorator annotation punctuation" style=color:#393A34>@datetime_scalar</span><span class="token decorator annotation punctuation" style=color:#393A34>.</span><span class="token decorator annotation punctuation" style=color:#393A34>value_parser</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token keyword" style=color:#00009f>def</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>parse_datetime_value</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">value</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token comment" style=color:#999988;font-style:italic># dateutil is provided by python-dateutil library</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token keyword" style=color:#00009f>if</span><span class="token plain"> value</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        </span><span class="token keyword" style=color:#00009f>return</span><span class="token plain"> dateutil</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">parser</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">parse</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">value</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token decorator annotation punctuation" style=color:#393A34>@datetime_scalar</span><span class="token decorator annotation punctuation" style=color:#393A34>.</span><span class="token decorator annotation punctuation" style=color:#393A34>literal_parser</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token keyword" style=color:#00009f>def</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>parse_datetime_literal</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">ast</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    value </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">ast</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">value</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token keyword" style=color:#00009f>return</span><span class="token plain"> parse_datetime_value</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">value</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain">  </span><span class="token comment" style=color:#999988;font-style:italic># reuse logic from parse_value</span><br></span></code></pre></div></div>
<p>There are a few things happening in the above code, so let's go through it step by step:</p>
<p>If the value is passed as part of query's <code>variables</code>, it's passed to <code>parse_datetime_value</code>.</p>
<p>If the value is not empty, <code>dateutil.parser.parse</code> is used to parse it to the valid Python <code>datetime</code> object instance that is then returned.</p>
<p>If value is incorrect and either a <code>ValueError</code> or <code>TypeError</code> exception is raised by the <code>dateutil.parser.parse</code> GraphQL server interprets this as a sign that the entered value is incorrect because it can't be transformed to internal representation and returns an automatically generated error message to the client that consists of two parts:</p>
<ul>
<li>Part supplied by GraphQL, for example: <code>Expected type Datetime!, found "invalid string"</code></li>
<li>Exception message: <code>time data 'invalid string' does not match format '%Y-%m-%d'</code></li>
</ul>
<p>Complete error message returned by the API will look like this:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-text codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">    Expected type Datetime!, found "invalid string"; time data 'invalid string' does not match format '%Y-%m-%d'</span><br></span></code></pre></div></div>
<blockquote>
<p>You can raise either <code>ValueError</code> or <code>TypeError</code> in your parsers.</p>
</blockquote>
<blockquote>
<p>Because the error message returned by the GraphQL includes the original exception message from your Python code, it may contain details specific to your system or implementation that you may not want to make known to the API consumers. You may decide to catch the original exception with <code>except (ValueError, TypeError)</code> and then raise your own <code>ValueError</code> with a custom message or no message at all to prevent this from happening.</p>
</blockquote>
<p>If a value is specified as part of query content, its <code>ast</code> node is instead passed to <code>parse_datetime_literal</code> to give scalar a chance to introspect type of the node (implementations for those be found <a href=https://github.com/graphql-python/graphql-core-next/blob/master/graphql/language/ast.py#L261 target=_blank rel="noopener noreferrer">here</a>).</p>
<p>Logic implemented in the <code>parse_datetime_literal</code> may be completely different from that in the <code>parse_datetime_value</code>, however, in this example <code>ast</code> node is simply unpacked, coerced to <code>str</code> and then passed to <code>parse_datetime_value</code>, reusing the parsing logic from that other function.</p>
<blockquote>
<p>Defining <code>literal_parser</code> that only calls <code>value_parser</code> with <code>ast.value</code> is optional. Ariadne will create one for you when you set scalar value parser and there's no literal parser already set.</p>
</blockquote>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=configuration-reference>Configuration reference<a href=#configuration-reference class=hash-link aria-label="Direct link to Configuration reference" title="Direct link to Configuration reference">​</a></h2>
<p>In addition to decorators documented above, <code>ScalarType</code> provides two more ways for configuring it's logic.</p>
<p>You can pass your functions as values to <code>serializer</code>, <code>value_parser</code> and <code>literal_parser</code> keyword arguments on instantiation:</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-python codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token keyword" style=color:#00009f>from</span><span class="token plain"> ariadne </span><span class="token keyword" style=color:#00009f>import</span><span class="token plain"> ScalarType</span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token keyword" style=color:#00009f>from</span><span class="token plain"> thirdpartylib </span><span class="token keyword" style=color:#00009f>import</span><span class="token plain"> json_serialize_money</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> json_deserialize_money</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">money </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> ScalarType</span><span class="token punctuation" style=color:#393A34>(</span><span class="token string" style=color:#e3116c>"Money"</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> serializer</span><span class="token operator" style=color:#393A34>=</span><span class="token plain">json_serialize_money</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> value_parser</span><span class="token operator" style=color:#393A34>=</span><span class="token plain">json_deserialize_money</span><span class="token punctuation" style=color:#393A34>)</span><br></span></code></pre></div></div>
<p>Alternatively you can use <code>set_serializer</code>, <code>set_value_parser</code> and <code>set_literal_parser</code> setters:</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-python codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token keyword" style=color:#00009f>from</span><span class="token plain"> ariadne </span><span class="token keyword" style=color:#00009f>import</span><span class="token plain"> ScalarType</span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token keyword" style=color:#00009f>from</span><span class="token plain"> thirdpartylib </span><span class="token keyword" style=color:#00009f>import</span><span class="token plain"> json_serialize_money</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> json_deserialize_money</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">money </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> ScalarType</span><span class="token punctuation" style=color:#393A34>(</span><span class="token string" style=color:#e3116c>"Money"</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">money</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">set_serializer</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">json_serialize_money</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">money</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">set_value_parser</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">json_deserialize_money</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">money</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">set_literal_parser</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">json_deserialize_money</span><span class="token punctuation" style=color:#393A34>)</span><br></span></code></pre></div></div></div></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href=/server/0.4.0/error-messaging><div class=pagination-nav__sublabel>Previous</div><div class=pagination-nav__label>Error messaging</div></a><a class="pagination-nav__link pagination-nav__link--next" href=/server/0.4.0/enums><div class=pagination-nav__sublabel>Next</div><div class=pagination-nav__label>Enumeration types</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href=#example-read-only-scalar class="table-of-contents__link toc-highlight">Example read-only scalar</a><li><a href=#scalars-as-input class="table-of-contents__link toc-highlight">Scalars as input</a><li><a href=#configuration-reference class="table-of-contents__link toc-highlight">Configuration reference</a></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class=footer__title>Ariadne ecosystem</div><ul class="footer__items clean-list"><li class=footer__item><a href="https://github.com/mirumee/ariadne?tab=readme-ov-file" target=_blank rel="noopener noreferrer" class=footer__link-item>Ariadne GraphQL Server<svg width=13.5 height=13.5 aria-hidden=true class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a><li class=footer__item><a href="https://github.com/mirumee/ariadne-codegen?tab=readme-ov-file" target=_blank rel="noopener noreferrer" class=footer__link-item>Ariadne GraphQL Client<svg width=13.5 height=13.5 aria-hidden=true class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a><li class=footer__item><a href="https://github.com/mirumee/ariadne-graphql-modules?tab=readme-ov-file" target=_blank rel="noopener noreferrer" class=footer__link-item>Ariadne GraphQL Modules<svg width=13.5 height=13.5 aria-hidden=true class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a><li class=footer__item><a href="https://github.com/mirumee/ariadne-auth?tab=readme-ov-file" target=_blank rel="noopener noreferrer" class=footer__link-item>Ariadne Auth<svg width=13.5 height=13.5 aria-hidden=true class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a><li class=footer__item><a href="https://github.com/mirumee/ariadne-lambda?tab=readme-ov-file" target=_blank rel="noopener noreferrer" class=footer__link-item>Ariadne AWS Lambda Extension<svg width=13.5 height=13.5 aria-hidden=true class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a></ul></div><div class="theme-layout-footer-column col footer__col"><div class=footer__title>Community</div><ul class="footer__items clean-list"><li class=footer__item><a href=mailto:ariadne@mirumee.com target=_blank rel="noopener noreferrer" class=footer__link-item>Email<svg width=13.5 height=13.5 aria-hidden=true class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a><li class=footer__item><a href=https://x.com/AriadneGraphQL target=_blank rel="noopener noreferrer" class=footer__link-item>X<svg width=13.5 height=13.5 aria-hidden=true class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a></ul></div><div class="theme-layout-footer-column col footer__col"><div class=footer__title>More</div><ul class="footer__items clean-list"><li class=footer__item><a href="https://mirumee.com/blog?utm_source=ariadne_docs&utm_medium=referral" target=_blank rel="noopener noreferrer" class=footer__link-item>Blog<svg width=13.5 height=13.5 aria-hidden=true class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a><li class=footer__item><a href="https://github.com/mirumee/Ariadne?tab=readme-ov-file#ariadne-ecosystem" target=_blank rel="noopener noreferrer" class=footer__link-item>GitHub<svg width=13.5 height=13.5 aria-hidden=true class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a></ul></div></div><div class="footer__bottom text--center"><div class=footer__copyright>Copyright © 2025  Mirumee Software.</div></div></div></footer></div>