"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([["79858"],{4724:function(e,n,i){i.r(n),i.d(n,{frontMatter:()=>t,toc:()=>p,default:()=>d,metadata:()=>a,assets:()=>l,contentTitle:()=>o});var a=JSON.parse('{"id":"Servers/wsgi","title":"WSGI application","description":"Ariadne provides a GraphQL class that implements a production-ready WSGI application.","source":"@site/server_versioned_docs/version-0.25.1/04-Servers/02-wsgi.md","sourceDirName":"04-Servers","slug":"/Servers/wsgi","permalink":"/server/0.25.1/Servers/wsgi","draft":false,"unlisted":false,"tags":[],"version":"0.25.1","sidebarPosition":2,"frontMatter":{"id":"wsgi","title":"WSGI application"},"sidebar":"tutorialSidebar","previous":{"title":"ASGI application","permalink":"/server/0.25.1/Servers/asgi"},"next":{"title":"AWS Lambda","permalink":"/server/0.25.1/Servers/aws-lambda"}}'),r=i(74848),s=i(84429);let t={id:"wsgi",title:"WSGI application"},o,l={},p=[{value:"Using with a WSGI server",id:"using-with-a-wsgi-server",level:2},{value:"Configuration options",id:"configuration-options",level:3},{value:"Using the middleware",id:"using-the-middleware",level:2}];function c(e){let n={a:"a",code:"code",h2:"h2",h3:"h3",p:"p",pre:"pre",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.p,{children:["Ariadne provides a ",(0,r.jsx)(n.code,{children:"GraphQL"})," class that implements a production-ready WSGI application."]}),"\n",(0,r.jsxs)(n.p,{children:["Ariadne also provides ",(0,r.jsx)(n.code,{children:"GraphQLMiddleware"})," that allows you to route between a ",(0,r.jsx)(n.code,{children:"GraphQL"})," instance and another WSGI app based on the request path."]}),"\n",(0,r.jsx)(n.h2,{id:"using-with-a-wsgi-server",children:"Using with a WSGI server"}),"\n",(0,r.jsx)(n.p,{children:"First create an application instance pointing it to the schema to serve:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"# in mywsgi.py\nimport os\n\nfrom ariadne import make_executable_schema\nfrom ariadne.wsgi import GraphQL\nfrom mygraphql import type_defs, resolvers\n\nschema = make_executable_schema(type_defs, resolvers)\napplication = GraphQL(schema)\n"})}),"\n",(0,r.jsx)(n.p,{children:"Then point a WSGI server such as uWSGI or Gunicorn at the above instance."}),"\n",(0,r.jsx)(n.p,{children:"Example using Gunicorn:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-console",children:"$ gunicorn mywsgi:application\n"})}),"\n",(0,r.jsx)(n.p,{children:"Example using uWSGI:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-console",children:"$ uwsgi --http :8000 --wsgi-file mywsgi\n"})}),"\n",(0,r.jsx)(n.h3,{id:"configuration-options",children:"Configuration options"}),"\n",(0,r.jsxs)(n.p,{children:["See the ",(0,r.jsx)(n.a,{href:"../API-reference/wsgi-reference#constructor",children:"reference"}),"."]}),"\n",(0,r.jsx)(n.h2,{id:"using-the-middleware",children:"Using the middleware"}),"\n",(0,r.jsxs)(n.p,{children:["To add GraphQL API to your project using ",(0,r.jsx)(n.code,{children:"GraphQLMiddleware"}),", instantiate it with your existing WSGI application as a first argument and your schema as the second:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'# in wsgi.py\nimport os\n\nfrom django.core.wsgi import get_wsgi_application\nfrom ariadne import make_executable_schema\nfrom ariadne.wsgi import GraphQL, GraphQLMiddleware\nfrom mygraphql import type_defs, resolvers\n\nos.environ.setdefault("DJANGO_SETTINGS_MODULE", "mydjangoproject.settings")\n\nschema = make_executable_schema(type_defs, resolvers)\ndjango_application = get_wsgi_application()\ngraphql_application = GraphQL(schema)\napplication = GraphQLMiddleware(django_application, graphql_application)\n'})}),"\n",(0,r.jsxs)(n.p,{children:["Now direct your WSGI server to ",(0,r.jsx)(n.code,{children:"wsgi.application"}),". The GraphQL API is available on ",(0,r.jsx)(n.code,{children:"/graphql/"})," by default but this can be customized by passing a different path as the third argument:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'# GraphQL will now be available on "/graphql-v2/" path\napplication = GraphQLMiddleware(django_application, graphql_application, "/graphql-v2/")\n'})})]})}function d(e={}){let{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},84429:function(e,n,i){i.d(n,{R:()=>t,x:()=>o});var a=i(96540);let r={},s=a.createContext(r);function t(e){let n=a.useContext(s);return a.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),a.createElement(s.Provider,{value:n},e.children)}}}]);