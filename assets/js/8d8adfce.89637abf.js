"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([["70925"],{96400:function(e,n,a){a.r(n),a.d(n,{frontMatter:()=>o,toc:()=>l,default:()=>h,metadata:()=>t,assets:()=>d,contentTitle:()=>i});var t=JSON.parse('{"id":"django-integration","title":"Django integration","description":"Ariadne ships with ariadne.contrib.django package that should be used as Django app and provides utilities for adding GraphQL server to Django projects.","source":"@site/server_versioned_docs/version-0.4.0/django-integration.md","sourceDirName":".","slug":"/django-integration","permalink":"/server/0.4.0/django-integration","draft":false,"unlisted":false,"tags":[],"version":"0.4.0","frontMatter":{"id":"django-integration","title":"Django integration","sidebar_label":"Django"},"sidebar":"tutorialSidebar","previous":{"title":"WSGI application","permalink":"/server/0.4.0/wsgi"},"next":{"title":"Flask","permalink":"/server/0.4.0/flask-integration"}}'),r=a(74848),s=a(84429);let o={id:"django-integration",title:"Django integration",sidebar_label:"Django"},i,d={},l=[{value:"Adding GraphQL API to Django project",id:"adding-graphql-api-to-django-project",level:2},{value:"Add app to <code>INSTALLED_APPS</code>",id:"add-app-to-installed_apps",level:3},{value:"Create executable schema",id:"create-executable-schema",level:3},{value:"Add GraphQL view to your urls",id:"add-graphql-view-to-your-urls",level:3},{value:"Configuration options",id:"configuration-options",level:3},{value:"Django Channels",id:"django-channels",level:2},{value:"<code>Date</code> and <code>Datetime</code> scalars",id:"date-and-datetime-scalars",level:2}];function c(e){let n={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.p,{children:["Ariadne ships with ",(0,r.jsx)(n.code,{children:"ariadne.contrib.django"})," package that should be used as Django app and provides utilities for adding GraphQL server to Django projects."]}),"\n",(0,r.jsx)(n.h2,{id:"adding-graphql-api-to-django-project",children:"Adding GraphQL API to Django project"}),"\n",(0,r.jsxs)(n.h3,{id:"add-app-to-installed_apps",children:["Add app to ",(0,r.jsx)(n.code,{children:"INSTALLED_APPS"})]}),"\n",(0,r.jsxs)(n.p,{children:["Add ",(0,r.jsx)(n.code,{children:"ariadne.contrib.django"})," to your project's ",(0,r.jsx)(n.code,{children:"INSTALLED_APPS"})," setting (usually located in ",(0,r.jsx)(n.code,{children:"settings.py"}),"):"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'INSTALLED_APPS = [\n    ...\n    "ariadne.contrib.django",\n]\n'})}),"\n",(0,r.jsxs)(n.p,{children:["Ariadne app provides Django template for GraphQL Playground. Make sure that your Django project is configured to load templates form application directories. This can be done by checking if ",(0,r.jsx)(n.code,{children:"APP_DIRS"})," option located in ",(0,r.jsx)(n.code,{children:"TEMPLATES"})," setting is set to ",(0,r.jsx)(n.code,{children:"True"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"TEMPLATES = [\n    {\n        ...,\n        'APP_DIRS': True,\n        ...\n    },\n]\n"})}),"\n",(0,r.jsx)(n.h3,{id:"create-executable-schema",children:"Create executable schema"}),"\n",(0,r.jsxs)(n.p,{children:["Create Python module somewhere in your project that will define the executable schema. It may be ",(0,r.jsx)(n.code,{children:"schema"})," module living right next to your settings and urls:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'# schema.py\nfrom ariadne import QueryType\n\ntype_defs = """\n    type Query {\n        hello: String!\n    }\n"""\n\nquery = QueryType()\n\n@query.field("hello")\ndef resolve_hello(*_):\n    return "Hello world!"\n\nschema = make_executable_schema(type_defs, query)\n'})}),"\n",(0,r.jsx)(n.h3,{id:"add-graphql-view-to-your-urls",children:"Add GraphQL view to your urls"}),"\n",(0,r.jsxs)(n.p,{children:["Add GraphQL view to your project's ",(0,r.jsx)(n.code,{children:"urls.py"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"from ariadne.contrib.django.views import GraphQLView\nfrom django.urls import path\n\nfrom .schema import schema\n\nurlpatterns = [\n    ...\n    path('graphql/', GraphQLView.as_view(schema=schema), name='graphql'),\n]\n"})}),"\n",(0,r.jsx)(n.h3,{id:"configuration-options",children:"Configuration options"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"GraphQLView.as_view()"})," takes mostly the same options that ",(0,r.jsx)(n.a,{href:"/server/0.4.0/api-reference#configuration-options",children:(0,r.jsx)(n.code,{children:"graphql"})})," does, but with two differences:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"context_value"})," can be callable that will be called with single argument (",(0,r.jsx)(n.a,{href:"https://docs.djangoproject.com/en/2.2/ref/request-response/#httprequest-objects",children:(0,r.jsx)(n.code,{children:"HttpRequest"})})," instance) and its return value will be used for rest of query execution as ",(0,r.jsx)(n.code,{children:"context_value"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"debug"})," option is not available and it's set to the value of ",(0,r.jsx)(n.code,{children:"settings.DEBUG"})]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["Django GraphQL view has one option specific to it: ",(0,r.jsx)(n.code,{children:"playground_options"}),", a dict of ",(0,r.jsx)(n.a,{href:"https://github.com/prisma/graphql-playground#settings",children:"GraphQL Playground options"})," that should be used."]}),"\n",(0,r.jsx)(n.h2,{id:"django-channels",children:"Django Channels"}),"\n",(0,r.jsxs)(n.p,{children:["Ariadne's ",(0,r.jsx)(n.a,{href:"/server/0.4.0/asgi",children:"ASGI application"})," can be used together with ",(0,r.jsx)(n.a,{href:"https://github.com/django/channels",children:"Django Channels"})," to implement asynchronous GraphQL API with features like ",(0,r.jsx)(n.a,{href:"/server/0.4.0/subscriptions",children:"subscriptions"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'from ariadne.asgi import GraphQL\nfrom channels.http import AsgiHandler\nfrom channels.routing import URLRouter\nfrom django.urls import path\n\n\nschema = ...\n\n\napplication = URLRouter([\n    path("graphql/", GraphQL(schema, debug=True)),\n    path("", AsgiHandler),\n])\n'})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.p,{children:["At the moment Django ORM doesn't support asynchronous query execution and there is ",(0,r.jsx)(n.strong,{children:"noticeable performance loss"})," when using it for database access in asynchronous resolvers."]}),"\n",(0,r.jsxs)(n.p,{children:["Use asynchronous ORM such as ",(0,r.jsx)(n.a,{href:"https://github.com/fantix/gino",children:"Gino"})," for database queries in your resolvers."]}),"\n"]}),"\n",(0,r.jsxs)(n.h2,{id:"date-and-datetime-scalars",children:[(0,r.jsx)(n.code,{children:"Date"})," and ",(0,r.jsx)(n.code,{children:"Datetime"})," scalars"]}),"\n",(0,r.jsxs)(n.p,{children:["For convenience Ariadne also provides ",(0,r.jsx)(n.code,{children:"Date"})," and ",(0,r.jsx)(n.code,{children:"DateTime"})," scalar implementations that can be used to represent Django dates and datetimes in form understood by JS date and time handling libraries like ",(0,r.jsx)(n.a,{href:"https://momentjs.com/",children:"Moment.js"}),"."]}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.p,{children:["Scalars have dependency on ",(0,r.jsx)(n.a,{href:"https://github.com/dateutil/dateutil",children:"dateutil library"}),"."]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["To use them in your project, update your schema to define ",(0,r.jsx)(n.code,{children:"Date"})," and ",(0,r.jsx)(n.code,{children:"Datetime"})," scalar and pass their Python implementations to ",(0,r.jsx)(n.code,{children:"make_executable_schema"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'from ariadne.contrib.django.scalars import date_scalar, datetime_scalar\n\ntype_defs = """\n    scalar Date\n    scalar DateTime\n\n    type Query {\n        hello: String\n    }\n"""\n\nschema = make_executable_schema(type_defs, [date_scalar, datetime_scalar, ...])\n'})})]})}function h(e={}){let{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},84429:function(e,n,a){a.d(n,{R:()=>o,x:()=>i});var t=a(96540);let r={},s=t.createContext(r);function o(e){let n=t.useContext(s);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),t.createElement(s.Provider,{value:n},e.children)}}}]);